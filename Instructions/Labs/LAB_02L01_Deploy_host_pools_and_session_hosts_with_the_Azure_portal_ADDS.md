---
lab:
  title: '랩: Azure Portal을 사용하여 호스트 풀과 세션 호스트 배포(AD DS)'
  module: 'Module 2: Implement an AVD Infrastructure'
---

# 랩 - Azure Portal을 사용하여 호스트 풀 및 세션 호스트 배포(AD DS)
# 학생용 랩 매뉴얼

## 랩 종속성

- 이 랩에서 사용할 Azure 구독
- 이 랩에서 사용할 Azure 구독에 대한 소유자 또는 기여자 역할, 그리고 해당 Azure 구독에 연결된 Microsoft Entra 테넌트의 전역 관리자 역할이 할당되어 있는 Microsoft 계정 또는 Microsoft Entra 계정.
- 완료된 **Azure Virtual Desktop의 배포 준비(AD DS)** 랩

## 예상 소요 시간

60분

## 랩 시나리오

Active Directory Domain Services(AD DS) 환경에서 호스트 풀과 세션 호스트를 만들고 구성해야 합니다.

## 목표
  
이 랩을 완료하면 다음을 수행할 수 있습니다.

- AD DS 도메인에서 Azure Virtual Desktop 환경 구현
- AD DS 도메인에서 Azure Virtual Desktop 환경 유효성 검사

## 랩 파일

- None

## 지침

### 연습 1: AD DS 도메인에서 Azure Virtual Desktop 환경 구현
  
이 연습의 주요 작업은 다음과 같습니다.

1. Azure Virtual Desktop 호스트 풀 배포용 AD DS 도메인 구독 준비
1. Azure Virtual Desktop 호스트 풀 배포
1. Azure Virtual Desktop 호스트 풀 세션 호스트 관리
1. Azure Virtual Desktop 애플리케이션 그룹 구성
1. Azure Virtual Desktop 작업 영역 구성

#### 작업 1: Azure Virtual Desktop 호스트 풀 배포용 AD DS 도메인 구독 준비

1. 랩 컴퓨터에서 웹 브라우저를 시작하여 [Azure Portal]( )로 이동하고 이 랩에서 사용할 구독에서 소유자 역할을 가진 사용자 계정의 자격 증명을 제공하여 로그인합니다.
1. Azure Portal에서 **가상 머신**을 검색하여 선택하고 **가상 머신** 블레이드에서 **az140-dc-vm11**을 선택합니다.
1. **az140-dc-vm11** 블레이드에서 **연결**을 선택하고 드롭다운 메뉴에서 **베스천**을 선택합니다. **az140-dc-vm11 \| 연결** 블레이드의 **베스천** 탭에서 **베스천 사용**을 선택합니다.
1. 메시지가 표시되면 다음 자격 증명을 제공하고 **연결**을 선택합니다.

   |설정|값|
   |---|---|
   |사용자 이름|**Student**|
   |암호|**Pa55w.rd1234**|

1. **az140-dc-vm11**에 연결된 Bastion 세션 내에서 관리자로 **Windows PowerShell ISE**를 시작합니다.
1. **az140-dc-vm11**에 연결된 원격 데스크톱 세션 내의 **관리자: Windows PowerShell ISE** 콘솔에서 다음 명령을 실행하여 조직 구성 단위를 만듭니다. 이 조직 구성 단위는 Azure Virtual Desktop 호스트의 컴퓨터 개체를 호스트합니다.

   ```powershell
   New-ADOrganizationalUnit 'WVDInfra' –path 'DC=adatum,DC=com' -ProtectedFromAccidentalDeletion $false
   ```

1. **관리자: Windows PowerShell ISE** 콘솔에서 다음 명령을 실행하여 **aduser1** 계정의 사용자 계정 이름을 확인합니다.

   ```powershell
   (Get-AzADUser -DisplayName 'aduser1').UserPrincipalName
   ```

   > **참고**: 이 단계에서 확인한 사용자 계정 이름을 적어 두세요. 이 랩의 후반부에서 필요합니다.

1. **관리자: Windows PowerShell ISE** 콘솔에서 다음 명령을 실행하여 **Microsoft.DesktopVirtualization** 리소스 공급자를 등록합니다.

   ```powershell
   Register-AzResourceProvider -ProviderNamespace Microsoft.DesktopVirtualization
   ```

1. **az140-dc-vm11**에 연결된 Bastion 세션 내에서 Microsoft Edge를 시작하고 [Azure Portal](https://portal.azure.com)로 이동합니다. 메시지가 표시되면 이 랩에서 사용 중인 구독의 소유자 역할이 있는 사용자 계정의 Microsoft Entra 자격 증명을 사용하여 로그인합니다.
1. **az140-dc-vm11**에 연결된 Bastion 세션 내의 Azure Portal에서 Azure Portal 페이지 상단의 **리소스, 서비스 및 문서 검색** 텍스트 상자를 사용하여 **가상 네트워크**를 검색한 후 해당 위치로 이동합니다. 그런 다음 **가상 네트워크** 블레이드에서 **az140-adds-vnet11**을 선택합니다. 
1. **az140-adds-vnet11** 블레이드에서 **서브넷**을 선택하고 **서브넷** 블레이드에서 **+ 서브넷**을 선택합니다. 그런 다음 **서브넷 추가** 블레이드에서 다음 설정을 지정하고(나머지 설정은 모두 기본값으로 유지) **저장**을 클릭합니다.

   |설정|값|
   |---|---|
   |속성|**hp1-Subnet**|
   |서브넷 주소 범위|**10.0.1.0/24**|

#### 작업 2: Azure Virtual Desktop 호스트 풀 배포

1. **az140-dc-vm11**에 대한 Bastion 세션 내의 Azure Portal이 표시된 Microsoft Edge 창에서 **Azure Virtual Desktop**을 검색하여 선택한 후 **Azure Virtual Desktop** 블레이드에서 **호스트 풀**을 선택합니다. 그런 다음, **Azure Virtual Desktop \| 호스트 풀** 블레이드에서 **+ 만들기**를 선택합니다. 
1. **호스트 풀 만들기** 블레이드의 **기본** 탭에서 다음 설정을 지정하고 **다음: 가상 머신 >** 을 선택합니다(다른 설정은 기본값 유지).

   |설정|값|
   |---|---|
   |구독|이 랩에서 사용 중인 Azure 구독의 이름|
   |Resource group|**az140-21-RG**라는 **새** 리소스 그룹을 만듭니다.|
   |호스트 풀 이름|**az140-21-hp1**|
   |위치|이 랩의 첫 번째 연습에서 리소스를 배포한 Azure 지역 또는 이와 가까운 지역의 이름 |
   |유효성 검사 환경|**문제**|
   |기본 설정 앱 그룹 유형|**데스크톱**|
   |호스트 풀 유형|**풀링됨**|
   |부하 분산 알고리즘|**너비 우선**|
   |최대 세션 제한|**12**|

1. **호스트 풀 만들기** 블레이드의 **가상 머신** 탭에서 다음 설정을 지정하고 **다음: 작업 영역 >** 을 선택합니다(다른 모든 설정은 기본값 유지).

   |설정|값|
   |---|---|
   |가상 컴퓨터 추가|**예**|
   |Resource group|**호스트 풀과 같은 그룹으로 기본 지정됨**|
   |이름 접두사|**az140-21-p1**|
   |가상 머신 유형|Azure 가상 머신|
   |가상 머신 위치|이전 랩에서 리소스를 배포한 Azure 지역의 이름|
   |가용성 옵션|**인프라 중복 필요 없음**|
   |보안 유형|**Standard**|
   |이미지|**Windows 11 Enterprise 다중 세션 + Microsoft 365 앱, 버전 22H2**|
   |가상 머신 크기|**표준 D2s v3**|
   |VM 수|**2**|
   |OS 디스크 유형|**표준 SSD**|
   |OS 디스크 크기|**128GB(P10)로 크기 조정**|
   |부팅 진단|**관리형 스토리지 계정으로 활성화(권장)**|
   |가상 네트워크|**az140-adds-vnet11**|
   |서브넷|**hp1-Subnet(10.0.1.0/24)**|
   |네트워크 보안 그룹|**기본**|
   |퍼블릭 인바운드 포트|**문제**|
   |조인할 디렉터리를 선택합니다.|**Active Directory**|
   |AD 도메인 가입 UPN|**student@adatum.com**|
   |암호|**Pa55w.rd1234**|
   |암호 확인|**Pa55w.rd1234**|
   |도메인 또는 단위 지정|**예**|
   |가입할 도메인|**adatum.com**|
   |조직 구성 단위 경로|**OU=WVDInfra,DC=adatum,DC=com**|
   |사용자 이름|**Student**|
   |암호|**Pa55w.rd1234**|
   |암호 확인|**Pa55w.rd1234**|

1. **호스트 풀 만들기** 블레이드의 **작업 영역** 탭에서 다음 설정을 확인하고 **검토 + 만들기**를 선택합니다.

   |설정|값|
   |---|---|
   |데스크톱 앱 그룹 등록|**문제**|

1. **호스트 풀 만들기** 블레이드의 **검토 + 만들기** 탭에서 **만들기**를 선택합니다.

   > **참고**: 배포가 완료될 때까지 기다립니다. 10~15분 정도 걸릴 수 있습니다.

#### 작업 3: Azure Virtual Desktop 호스트 풀 세션 호스트 관리

1. **az140-dc-vm11**에 대한 Bastion 세션 내의 Azure Portal이 표시된 웹 브라우저 창에서 **Azure Virtual Desktop**을 검색하여 선택합니다. 그런 다음, **Azure Virtual Desktop** 블레이드 세로 메뉴 모음에 있는 **관리 섹션**에서 **호스트 풀**을 선택합니다.
1. **Azure Virtual Desktop \| 호스트 풀** 블레이드의 호스트 풀 목록에서 **az140-21-hp1**을 선택합니다.
1. **az140-21-hp1** 블레이드의 세로 메뉴 모음에 있는 **관리 섹션**에서 **세션 호스트**를 선택하여 풀에 호스트 2개가 포함되어 있는지 확인합니다. 
1. **az140-21-hp1 \| 세션 호스트** 블레이드에서 **+ 추가**를 선택합니다.
1. **호스트 풀에 가상 머신 추가** 블레이드의 **기본** 탭에서 미리 구성된 설정을 검토하고 **다음: 가상 머신**을 선택합니다.
1. **호스트 풀에 가상 머신 추가** 블레이드의 **가상 머신** 탭에서 다음 설정을 지정하고(다른 모든 설정은 기본값 유지) **검토 + 만들기**를 선택합니다.

   |설정|값|
   |---|---|
   |Resource group|**az140-21-RG**|
   |이름 접두사|**az140-21-p1**|
   |가상 머신 위치|처음 2개 세션 호스트 VM을 배포한 Azure 지역의 이름|
   |가용성 옵션|**인프라 중복 필요 없음**|
   |보안 유형|**Standard**|
   |이미지|**Windows 11 Enterprise 다중 세션 + Microsoft 365 앱, 버전 22H2**|
   |VM 수|**1**|
   |OS 디스크 유형|**표준 SSD**|
   |OS 디스크 크기|**기본 크기(128GB)**|
   |부팅 진단|**관리형 스토리지 계정으로 활성화(권장)**|
   |가상 네트워크|**az140-adds-vnet11**|
   |서브넷|**hp1-Subnet(10.0.1.0/24)**|
   |네트워크 보안 그룹|**기본**|
   |퍼블릭 인바운드 포트|**문제**|
   |조인할 디렉터리를 선택합니다.|**Active Directory**|
   |AD 도메인 가입 UPN|**student@adatum.com**|
   |암호|**Pa55w.rd1234**|
   |암호 확인|**Pa55w.rd1234**|
   |도메인 또는 단위 지정|**예**|
   |가입할 도메인|**adatum.com**|
   |조직 구성 단위 경로|**OU=WVDInfra,DC=adatum,DC=com**|   
   |사용자 이름|**Student**|
   |암호|**Pa55w.rd1234**|
   |암호 확인|**Pa55w.rd1234**|

   > **참고**: 보시다시피 기존 풀에 세션 호스트를 추가하면서 VM 접두사와 이미지를 변경할 수 있습니다. 하지만 일반적으로는 풀의 모든 VM을 바꾸려는 경우가 아니면 접두사와 이미지를 변경하지 않는 것이 좋습니다. 

1. **호스트 풀에 가상 머신 추가** 블레이드의 **검토 + 만들기** 탭에서 **만들기**를 선택합니다.

   > **참고**: 배포가 완료될 때까지 기다린 후 다음 작업을 진행하세요. 10분 정도 걸릴 수 있습니다. 

#### 작업 4: Azure Virtual Desktop 애플리케이션 그룹 구성

1. **az140-dc-vm11**에 대한 Bastion 세션 내에서 Azure Portal을 표시하는 웹 브라우저 창에서 **Azure Virtual Desktop**을 검색 및 선택하고, **Azure Virtual Desktop** 블레이드에서 **애플리케이션 그룹**을 선택합니다.
1. **Azure Virtual Desktop \| 애플리케이션 그룹** 블레이드에서 자동 생성된 기존 **az140-21-hp1-DAG** 데스크톱 애플리케이션 그룹을 찾아서 선택합니다. 
1. **az140-21-hp1-DAG** 블레이드에서 **할당**을 선택합니다.
1. **az140-21-hp1-DAG \| 할당** 블레이드에서 **+ 추가**를 선택합니다.
1. **Microsoft Entra 사용자 또는 사용자 그룹 선택** 블레이드에서 **그룹**을 선택하고 **az140-wvd-pooled**를 선택한 다음, **선택**을 클릭합니다.
1. **Azure Virtual Desktop \| 애플리케이션 그룹** 블레이드로 다시 이동하여 **+ 만들기**를 선택합니다. 
1. **애플리케이션 그룹 만들기** 블레이드의 **기본** 탭에서 다음 설정을 지정하고 **다음: 애플리케이션 >** 을 선택합니다.

   |설정|값|
   |---|---|
   |구독|이 랩에서 사용 중인 Azure 구독의 이름|
   |Resource group|**az140-21-RG**|
   |호스트 풀|**az140-21-hp1**|
   |애플리케이션 그룹 종류|**원격 앱**|
   |애플리케이션 그룹 이름|**az140-21-hp1-Office365-RAG**|

1. **애플리케이션 그룹 만들기** 블레이드의 **애플리케이션** 탭에서 **+ 애플리케이션 추가를** 선택합니다.
1. **애플리케이션 추가** 블레이드에서 다음 설정을 지정하고 **검토 + 추가**를 선택한 다음, **추가**를 선택합니다.

   |설정|값|
   |---|---|
   |애플리케이션 소스|**시작 메뉴**|
   |애플리케이션|**Word**|
   |설명|**Microsoft Word**|
   |명령줄 필요|**문제**|

1. **애플리케이션 그룹 만들기** 블레이드의 **애플리케이션** 탭으로 돌아와 **+ 애플리케이션 추가**를 선택합니다.
1. **애플리케이션 추가** 블레이드에서 다음 설정을 지정하고 **검토 + 추가**를 선택한 다음, **추가**를 선택합니다.

   |설정|값|
   |---|---|
   |애플리케이션 소스|**시작 메뉴**|
   |애플리케이션|**Excel**|
   |설명|**Microsoft Excel**|
   |명령줄 필요|**문제**|

1. **애플리케이션 그룹 만들기** 블레이드의 **애플리케이션** 탭으로 돌아와 **+ 애플리케이션 추가**를 선택합니다.
1. **애플리케이션 추가** 블레이드에서 다음 설정을 지정하고 **검토 + 추가**를 선택한 다음, **추가**를 선택합니다.

   |설정|값|
   |---|---|
   |애플리케이션 소스|**시작 메뉴**|
   |애플리케이션|**PowerPoint**|
   |설명|**Microsoft PowerPoint**|
   |명령줄 필요|**문제**|

1. **애플리케이션 그룹 만들기** 블레이드의 **애플리케이션** 탭으로 돌아와 **다음: 할당 >** 을 선택합니다.
1. **애플리케이션 그룹 만들기** 블레이드의 **할당** 탭에서 **+ Microsoft Entra 사용자 또는 사용자 그룹 추가**를 선택합니다.
1. **Microsoft Entra 사용자 또는 사용자 그룹 선택** 블레이드에서 **그룹**을 선택한 다음, **az140-wvd-remote-app**을 선택하고 **선택**을 클릭합니다.
1. **애플리케이션 그룹 만들기** 블레이드의 **할당** 탭으로 돌아와 **다음: 작업 영역 >** 을 선택합니다.
1. **작업 영역 만들기** 블레이드의 **작업 영역** 탭에서 다음 설정을 지정하고 **검토 + 만들기**를 선택합니다.

   |설정|값|
   |---|---|
   |애플리케이션 그룹 등록|**문제**|

1. **애플리케이션 그룹 만들기** 블레이드의 **검토 + 만들기** 탭에서 **만들기**를 선택합니다.

   > **참고**: 애플리케이션 그룹이 만들어질 때까지 기다립니다. 이는 1분 이내에 완료됩니다. 

   > **참고**: 다음으로는 파일 경로를 기준으로 하여 애플리케이션 그룹을 애플리케이션 원본으로 만듭니다.

1. **az140-dc-vm11**에 대한 Bastion 세션 내에서 **Azure Virtual Desktop**을 검색하여 선택한 후 **Azure Virtual Desktop** 블레이드에서 **애플리케이션 그룹**을 선택합니다.
1. **Azure Virtual Desktop \| 애플리케이션 그룹** 블레이드에서 **+ 만들기**를 선택합니다. 
1. **애플리케이션 그룹 만들기** 블레이드의 **기본** 탭에서 다음 설정을 지정하고 **다음: 애플리케이션 >** 을 선택합니다.

   |설정|값|
   |---|---|
   |구독|이 랩에서 사용 중인 Azure 구독의 이름|
   |Resource group|**az140-21-RG**|
   |호스트 풀|**az140-21-hp1**|
   |애플리케이션 그룹 종류|**RemoteApp**|
   |애플리케이션 그룹 이름|**az140-21-hp1-Utilities-RAG**|

1. **애플리케이션 그룹 만들기** 블레이드의 **애플리케이션** 탭에서 **+ 애플리케이션 추가를** 선택합니다.
1. **애플리케이션 추가** 블레이드의 **기본 사항** 탭에서 다음 설정을 지정하고 **다음**을 선택합니다.

   |설정|값|
   |---|---|
   |애플리케이션 소스|**파일 경로**|
   |Application path|**C:\Windows\system32\cmd.exe**|
   |애플리케이션 식별자|**명령 프롬프트**|
   |표시 이름|**명령 프롬프트**|
   |설명|**Windows 명령 프롬프트**|
   |명령줄 필요|**문제**|

1. **아이콘** 탭에서 다음 설정을 지정하고 **검토 + 추가**를 선택한 다음, **추가**를 선택합니다.

   |설정|값|
   |---|---|
   |아이콘 경로|**C:\Windows\system32\cmd.exe**|
   |아이콘 인덱스|0|

1. **애플리케이션 그룹 만들기** 블레이드의 **애플리케이션** 탭으로 돌아와 **다음: 할당 >** 을 선택합니다.
1. **애플리케이션 그룹 만들기** 블레이드의 **할당** 탭에서 **+ Microsoft Entra 사용자 또는 사용자 그룹 추가**를 선택합니다.
1. **Microsoft Entra 사용자 또는 사용자 그룹 선택** 블레이드에서 **그룹**을 선택하고 **az140-wvd-remote-app** 및 **az140-wvd-admins**를 선택한 다음, **선택**을 클릭합니다.
1. **애플리케이션 그룹 만들기** 블레이드의 **할당** 탭으로 돌아와 **다음: 작업 영역 >** 을 선택합니다.
1. **작업 영역 만들기** 블레이드의 **작업 영역** 탭에서 다음 설정을 지정하고 **검토 + 만들기**를 선택합니다.

   |설정|값|
   |---|---|
   |애플리케이션 그룹 등록|**문제**|

1. **애플리케이션 그룹 만들기** 블레이드의 **검토 + 만들기** 탭에서 **만들기**를 선택합니다.

#### 작업 5: Azure Virtual Desktop 작업 영역 구성

1. **az140-dc-vm11**에 대한 Bastion 세션 내에서 Azure Portal을 표시하는 Microsoft Edge 창에서 **Azure Virtual Desktop**을 검색 및 선택하고, **Azure Virtual Desktop** 블레이드에서 **작업 영역**을 선택합니다.
1. **Azure Virtual Desktop \| 작업 영역** 블레이드에서 **+ 만들기**를 선택합니다. 
1. **작업 영역 만들기** 블레이드의 **기본** 탭에서 다음 설정을 지정하고 **다음: 애플리케이션 그룹 >** 을 선택합니다.

   |설정|값|
   |---|---|
   |구독|이 랩에서 사용 중인 Azure 구독의 이름|
   |Resource group|**az140-21-RG**|
   |작업 영역 이름|**az140-21-ws1**|
   |식별 이름|**az140-21-ws1**|
   |위치|이 랩의 첫 번째 연습에서 리소스를 배포한 Azure 지역 또는 이와 가까운 지역의 이름|

1. **작업 영역 만들기** 블레이드의 **애플리케이션 그룹** 탭에서 다음 설정을 지정합니다.

   |설정|값|
   |---|---|
   |애플리케이션 그룹 등록|**예**|

1. **작업 영역 만들기** 블레이드의 **작업 영역** 탭에서 **+ 애플리케이션 그룹 등록**을 선택합니다.
1. **애플리케이션 그룹 추가** 블레이드에서 **az140-21-hp1-DAG**, **az140-21-hp1-Office365-RAG** 및 **az140-21-hp1-Utilities-RAG** 항목 옆의 더하기 기호를 선택하고 **선택**을 클릭합니다. 
1. **작업 영역 만들기** 블레이드의 **애플리케이션 그룹** 탭으로 돌아와 **검토 + 만들기**를 선택합니다.
1. **작업 영역 만들기** 블레이드의 **검토 + 만들기** 탭에서 **만들기**를 선택합니다.

### 연습 2: Azure Virtual Desktop 환경 유효성 검사
  
이 연습의 주요 작업은 다음과 같습니다.

1. Windows 10 컴퓨터에 MSRDC(Microsoft Remote Desktop 클라이언트) 설치
1. Azure Virtual Desktop 작업 영역 구독
1. Azure Virtual Desktop 앱 테스트

#### 작업 1: Windows 10 컴퓨터에 MSRDC(Microsoft Remote Desktop 클라이언트) 설치

1. **az140-dc-vm11**에 대한 Bastion 세션 내의 Azure Portal이 표시된 브라우저 창에서 **가상 머신**을 검색하여 선택한 후 **가상 머신** 블레이드에서 **az140-cl-vm11** 항목을 선택합니다.
1. **az140-cl-vm11** 블레이드 아래쪽의 **작업** 섹션으로 스크롤하여 **명령 실행**을 선택합니다. 
1. **az140-cl-vm11 \| 명령 실행** 블레이드에서 **EnableRemotePS**, **실행**을 차례로 선택합니다. 

   > **참고**: 명령이 완료될 때까지 기다렸다가 다음 단계를 진행합니다. 1분 정도 걸릴 수 있습니다. 도메인 프로필이 아니라 사용 중인 퍼블릭 프로필을 나타내는 빨간색 텍스트 오류가 표시될 수 있습니다. 그렇다면 무시하고 다음 단계로 넘어갈 수 있습니다.

1. **az140-dc-vm11**에 연결된 원격 데스크톱 세션 내의 **관리자: Windows PowerShell ISE** 스크립트 창에서 다음 명령을 실행하여 Windows 10을 실행 중인 Azure VM **az140-cl-vm11**의 로컬 **Remote Desktop Users** 그룹에 **ADATUM\\az140-wvd-users**의 모든 구성원을 추가합니다. 이 VM은 **Azure Virtual Desktop의 배포 준비(AD DS)** 랩에서 배포했던 VM입니다.

   ```powershell
   $computerName = 'az140-cl-vm11'
   Invoke-Command -ComputerName $computerName -ScriptBlock {Add-LocalGroupMember -Group 'Remote Desktop Users' -Member 'ADATUM\az140-wvd-users'}
   ```

1. 랩 컴퓨터로 전환한 후 랩 컴퓨터 내의 Azure Portal이 표시된 브라우저 창에서 **가상 머신**을 검색하여 선택합니다. 그런 다음, **가상 머신** 블레이드에서 **az140-cl-vm11** 항목을 선택합니다.
1. **az140-cl-vm11** 블레이드에서 **연결**을 선택하고 드롭다운 메뉴에서 **Bastion을 통해 연결**을 선택합니다.
1. 메시지가 표시되면 다음 자격 증명을 제공하고 **연결**을 선택합니다.

   |설정|값|
   |---|---|
   |사용자 이름|**Student@adatum.com**|
   |암호|**Pa55w.rd1234**|

   > **참고** 초기 로그인을 완료하는 데 5~10분이 걸릴 수 있습니다.

1. **az140-cl-vm11**에 대한 Bastion 세션 내에서 Microsoft Edge를 시작하고 [Windows Desktop 클라이언트 다운로드 페이지](https://go.microsoft.com/fwlink/?linkid=2068602)로 이동합니다. 해당 페이지에서 메시지가 표시되면 **실행**을 선택하여 설치를 시작합니다. **원격 데스크톱 설정** 마법사의 **설치 범위** 페이지에서 **이 컴퓨터의 모든 사용자에 대해 설치** 옵션을 선택하고 **설치**를을 클릭합니다. 관리 자격 증명에 대한 사용자 계정 컨트롤 관련 메시지가 표시되면 암호로 **Pa55w.rd1234\\를 사용하여 **ADATUM**Student** 사용자 이름으로 인증합니다.
1. 설치가 완료되면 **설정이 종료되면 원격 데스크톱 시작** 체크박스가 선택되어 있는지 확인한 후 **마침**을 클릭하여 원격 데스크톱 클라이언트를 시작합니다.

#### 작업 2: Azure Virtual Desktop 작업 영역 구독

1. **원격 데스크톱** 클라이언트 창에서 **구독**을 선택하고 메시지가 표시되면 **aduser1** 자격 증명으로 로그인합니다. 이 랩의 앞부분에서 확인한 userPrincipalName 특성과 이 계정을 만들 때 설정한 암호를 사용합니다.

   > **참고**: 또는 **원격 데스크톱** 클라이언트 창에서 **URL로 구독**을 선택합니다. 그리고 **작업 영역 구독** 창의 **메일 또는 작업 영역 URL**에 **https://client.wvd.microsoft.com/api/arm/feeddiscovery**를 입력하고 **다음**을 선택한 다음, 메시지가 표시되면 **aduser1** 자격 증명으로 로그인합니다(userPrincipalName 특성을 사용자 이름으로 사용하고 이 계정을 만들 때 설정한 암호). 

1. **원격 데스크톱** 페이지에 **aduser1** 사용자 계정과 그룹 등록을 통해 연결되어 있으며 작업 영역에 게시된 애플리케이션 그룹에 포함되어 있는 애플리케이션 목록이 표시되는지 확인합니다. 

#### 작업 3: Azure Virtual Desktop 앱 테스트

1. **az140-cl-vm11**에 대한 Bastion 세션 내의 **원격 데스크톱** 클라이언트 창의 애플리케이션 목록에서 **명령 프롬프트**를 두 번 클릭하고 **명령 프롬프트** 창이 시작되는지 확인합니다. 인증하라는 메시지가 표시되면 **aduser1** 사용자 계정을 만들 때 설정한 암호를 입력하고 **기억하기** 확인란을 선택한 다음, **확인**을 선택합니다.

   > **참고**: 처음에는 애플리케이션이 시작되려면 몇 분 정도 걸릴 수 있지만 그 이후부터는 애플리케이션이 훨씬 빠르게 시작됩니다.

   > **참고**: **Microsoft Teams 시작** 로그인 프롬프트가 표시되면 닫습니다.

1. 명령 프롬프트에서 **호스트 이름**을 입력하고 **Enter** 키를 눌러 명령 프롬프트가 실행 중인 컴퓨터의 이름을 표시합니다.

   > **참고**: 표시되는 이름이 **az140-cl-vm11**이 아닌 **az140-21-p1-0**, **az140-21-p1-1** 또는 **az140-21-p1-2**인지 확인합니다.

1. 명령 프롬프트에 **logoff**를 입력하고 **Enter** 키를 눌러 현재 원격 앱 세션에서 로그오프합니다.
1. **az140-cl-vm11**에 대한 Bastion 세션 내의 **원격 데스크톱** 클라이언트 창에 있는 애플리케이션 목록에서 **SessionDesktop**을 두 번 클릭하여 원격 데스크톱 세션이 시작되는지 확인합니다. 
1. **세션 데스크톱** 세션 내에서 **시작**을 마우스 오른쪽 단추로 클릭하고, **실행**을 선택한 다음, **실행** 대화 상자의 **열기** 텍스트 상자에 **cmd**를 입력하고 **확인**을 선택합니다. 
1. **세션 데스크톱** 세션 내의 명령 프롬프트에서 **hostname**을 입력한 다음, **Enter** 키를 눌러 원격 데스크톱이 실행 중인 컴퓨터의 이름을 표시합니다.
1. 표시되는 이름이 **az140-21-p1-0**, **az140-21-p1-1** 또는 **az140-21-p1-2**인지 확인합니다.
1. 명령 프롬프트에 **logoff**를 입력하고 **Enter** 키를 눌러 세션 데스크톱에서 로그오프합니다.
1. **az140-cl-vm11**에 대한 Bastion 세션 내에서 세션에서 로그아웃한 다음, **닫기**를 선택합니다.

### 연습 3: 랩에서 프로비전한 Azure VM 중지 및 할당 취소

이 연습의 주요 작업은 다음과 같습니다.

1. 랩에서 프로비전한 Azure VM 중지 및 할당 취소

>**참고**: 이 연습에서는 해당 컴퓨팅 비용을 최소화하기 위해 이 랩에서 프로비전한 Azure VM의 할당을 취소합니다.

#### 작업 1: 랩에서 프로비전한 Azure VM 할당 취소

1. 랩 컴퓨터로 전환한 다음, Azure Portal이 표시된 웹 브라우저 창에서 **Cloud Shell** 창 내에 **PowerShell** 셸 세션을 엽니다.
1. Cloud Shell 창 내의 PowerShell 세션에서 다음 명령을 실행하여 이 랩에서 만든 모든 Azure VM의 목록을 표시합니다.

   ```powershell
   Get-AzVM -ResourceGroup 'az140-21-RG'
   ```

1. Cloud Shell 창의 PowerShell 세션에서 다음 명령을 실행하여 이 랩에서 만든 모든 Azure VM을 중지하고 할당을 취소합니다.

   ```powershell
   Get-AzVM -ResourceGroup 'az140-21-RG' | Stop-AzVM -NoWait -Force
   ```

   >**참고**: 명령은 비동기적으로 실행되므로(-NoWait 매개 변수에 의해 결정됨) 동일한 PowerShell 세션 내에서 즉시 다른 PowerShell 명령을 실행할 수는 있지만, Azure VM이 실제로 중지 및 할당 취소되려면 몇 분 정도 걸립니다.
